# Troubleshooting<a name="elastic-gpus-troubleshooting"></a>

The following are common errors and troubleshooting steps\.

**Topics**
+ [Investigating Application Performance Issues](#elastic-gpus-troubleshooting_performance)
+ [Resolving Unhealthy Status Issues](#elastic-gpus-troubleshooting_unhealthy_status)

## Investigating Application Performance Issues<a name="elastic-gpus-troubleshooting_performance"></a>

Elastic GPU uses the instance network to send OpenGL commands to a remotely attached graphics card\. In addition, a desktop running an OpenGL application with an elastic GPU is usually accessed using a remote access technology\. It is important to distinguish between a performance problem related to the OpenGL rendering or the desktop remote access technology\.

### OpenGL Rendering Performance Issues<a name="elastic-gpus-opengl-performance"></a>

The OpenGL rendering performance is determined by the amount of OpenGL commands and frames generated on the remote instance\.

Rendering performance may vary depending on the following factors:
+ GPU performance
+ Network performance
+ CPU performance
+ Rendering model, scenario complexity
+ OpenGL application behavior

An easy way to evaluate performance is to display the number of rendered frames on the remote instance\. Elastic GPUs display a maximum of 25 FPS on the remote instance to achieve the best perceived quality while reducing network usage\.

**To show the number of frames produced**

1. Open the following file in a text editor\. If the file does not exist, create it\.

   ```
   C:\Program Files\Amazon\EC2ElasticGPUs\conf\eg.conf
   ```

1. Identify the `[Application]` section, or add it if it is not present, and add the following configuration parameter:

   ```
   [Application]
   show_fps=1
   ```

1. Restart the application and check the FPS again\.

If the FPS reaches 15\-25 FPS when updating the rendered scene, then the elastic GPU is performing at peak performance and any other performance problems you experience are likely related to the remote access to the instance desktop\. If that is the case, see the Remote Access Performance Issues section\.

If the FPS number is lower than 15, you can try the following:
+ Improve GPU performance by selecting a more powerful elastic GPU type\.
+ Improve overall network performance by using these tips:
  + Check the amount of incoming and outgoing bandwidth to and from the elastic GPU endpoint\. The elastic GPU endpoint can be retrieved with the following PowerShell command:

    ```
    PS C:\> (Invoke-WebRequest http://169.254.169.254/latest/meta-data/elastic-gpus/associations/[ELASTICGPU_ID]).content
    ```
  + The network traffic from the instance to the elastic GPU endpoint relates to the volume of commands the OpenGL application is producing\.
  + The network traffic from the elastic GPU endpoint to the instance relates to the number of frames generated by the GPU\.
  + If you see the network usage reaching the instances maximum network throughput, try using an instance with a higher network throughput allowance\.
+ Improve CPU performance:
  + Applications may require a lot of CPU resources in addition to what the elastic GPU requires\. If Windows Task Manager is reporting a high usage of CPU resources, try using an instance with more CPU power\.

### Remote Access Performance Issues<a name="elastic-gpus-remote-performance"></a>

An instance with an attached elastic GPU can be accessed using different remote access technologies\. Performance and quality may vary depending on:
+ The remote access technology
+ Instance performance
+ Client performance
+ Network latency and bandwidth between the client and the instance

Possible choices for the remote access protocol include:
+ Microsoft Remote Desktop Connection
+ NICE DCV
+ VNC

For more information about optimization, see the specific protocol\.

## Resolving Unhealthy Status Issues<a name="elastic-gpus-troubleshooting_unhealthy_status"></a>

If the elastic GPU is in an unhealthy state, the following are troubleshooting steps you can use to resolve the issue\.

**Topics**
+ [Stop and Start the Instance](#elastic-gpus-start-and-stop)
+ [Verify the Installed Components](#elastic-gpus-verify)
+ [Check the Amazon EC2 Elastic GPU Logs](#elastic-gpus-check-logs)

### Stop and Start the Instance<a name="elastic-gpus-start-and-stop"></a>

If your elastic GPU is in an unhealthy state, stopping the instance and starting it again is the simplest option\. For more details, see [Stopping and Starting Your Instances](Stop_Start.md#starting-stopping-instances)\.

**Warning**  
When you stop an instance, the data on any instance store volumes is erased\. Therefore, if you have any data on instance store volumes that you want to keep, be sure to back it up to persistent storage\.

### Verify the Installed Components<a name="elastic-gpus-verify"></a>

Open the Windows Control Panel and confirm that the following components are installed:
+ Amazon EC2 Elastic GPUs Manager
+ Amazon EC2 Elastic GPUs OGL
+ Amazon EC2 Elastic GPUs OGLRD

If any of these items are missing, see [Installing and Updating the Elastic GPU Packages](working-with-elastic-gpus.md#elastic-gpus-install-libraries) to do a manual installation\.

### Check the Amazon EC2 Elastic GPU Logs<a name="elastic-gpus-check-logs"></a>

Open the Windows Event Viewer and search for errors in the following sources:
+ EC2 Elastic GPUs Manager
+ EC2 Elastic GPUs Manager Agent
+ EC2 Elastic GPUs Manager GUI